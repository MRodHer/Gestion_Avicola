# Análisis del Documento: Sistema de Gestión Avícola

## 1. Resumen General

El documento describe la necesidad y el diseño de un **Sistema de Gestión Integral para la Producción Avícola en México**. El sistema está diseñado para optimizar las operaciones, asegurar el cumplimiento financiero con las Normas de Información Financiera (NIF) de México y proporcionar herramientas para la toma de decisiones estratégicas. El enfoque principal es controlar la eficiencia operativa, específicamente la **tasa de conversión alimenticia (CA)**, que es el factor más crítico para la rentabilidad en un mercado donde los precios de venta están limitados por las importaciones y los costos de los insumos están dictados por los mercados globales.

## 2. Requisitos Funcionales del Sistema

El sistema debe estar estructurado en módulos que cubran todas las facetas de la operación avícola:

### Módulo 1: Gestión de Producción y Lotes
- **Registro y Seguimiento de Lotes:** Capacidad para crear y gestionar lotes individuales, ya sea de pollo de engorde o de gallinas de postura.
    - **Datos de Inicio del Lote:** Fecha de inicio, número de aves iniciales, línea genética, costo de adquisición del pollito/pollita.
    - **Registro Diario de Datos:**
        - Mortalidad (número de bajas).
        - Consumo de alimento (en kg).
        - Consumo de agua (en litros).
        - Aplicación de vacunas y medicamentos.
        - Peso corporal promedio (muestreos semanales).
        - Producción de huevo (para lotes de postura): número de huevos, peso promedio.
- **Control de Insumos:** Gestión de inventario de alimentos, vacunas y otros consumibles.
- **Bioseguridad:** Registro y seguimiento de cumplimiento de las normativas de SENASICA (control de acceso, desinfección, bitácoras).

### Módulo 2: Costos y Valoración Financiera (Cumplimiento NIF)
- **Costeo de Lotes:**
    - Asignación de **costos directos** a cada lote: costo del pollito, alimento consumido, vacunas.
    - **Prorrateo de costos indirectos** (mano de obra, energía, depreciación de equipo) a los lotes activos.
- **Valoración de Activos Biológicos (NIF C-11):**
    - Cálculo diario del **valor del lote** (activo biológico en proceso) basado en el costo de transformación acumulado (costo de los insumos y gastos directos e indirectos aplicados).
    - Al momento del sacrificio, reclasificación del activo biológico a inventario de producto terminado, valorándolo a su **Valor Razonable Menos Costos de Disposición (VRMCD)**.

### Módulo 3: Ventas y Contabilidad
- **Registro de Ventas:**
    - Venta de pollo en pie (vivo).
    - Venta de pollo procesado (carne).
    - Venta de huevo.
- **Generación Automática de Pólizas Contables:** Cada transacción (compra de insumos, consumo de alimento, venta de producto) debe generar automáticamente los asientos contables correspondientes en un libro diario.
- **Catálogo de Cuentas:** Utilizar el catálogo de cuentas contables proporcionado en el documento, que está alineado con las NIF.

### Módulo 4: Reportes y Análisis de Desempeño (Dashboards)
- **Indicadores Clave de Desempeño (KPIs) en Tiempo Real:**
    - **Tasa de Conversión Alimenticia (CA):** Real vs. Teórico (según estándar genético).
    - **Porcentaje de Mortalidad:** Real vs. Objetivo.
    - **Ganancia Diaria de Peso:** Real vs. Teórico.
    - **Índice de Productividad (IP) / Factor de Eficiencia Europeo (FEE).**
    - **Para Postura:** Porcentaje de producción, huevos por ave alojada, consumo de alimento por ave.
- **Reportes Financieros:**
    - Generación automática del **Estado de Resultados, Balance General y Estado de Flujo de Efectivo** a partir del libro diario.
- **Análisis Comparativo:** Gráficas que comparen el desempeño real del lote contra los estándares de la línea genética (Cobb 500, Ross 308, Hy-Line Brown).

## 3. Arquitectura Propuesta y Fases de Implementación

El documento sugiere un enfoque de implementación por fases:

- **Fase 1 (Año 1):** Sistema basado en **hojas de cálculo** (Excel/Google Sheets). Es una solución de bajo costo para validar los procesos y la disciplina de captura de datos. Se detalla una estructura de hojas interconectadas (`REGISTRO_AVES`, `LIBRO_DIARIO`, `BD_PARAMETROS`, `DASHBOARD_ENGORDE`, etc.).
- **Fase 2 (Años 2-3):** Migración a una **base de datos centralizada (SQL)** con una **interfaz de usuario simple** (desarrollada en Python, por ejemplo). Esto mejora la integridad de los datos y permite el acceso concurrente.
- **Fase 3 (3+ años):** Adopción de un **ERP especializado** para la industria avícola (menciona ejemplos como PoultryPlan, MTech Systems).

## 4. Base de Conocimiento Clave

La información fundamental que debe formar parte de la base de conocimiento del sistema incluye:

- **Estándares de Producción:** Las tablas de rendimiento de las líneas genéticas Cobb 500, Ross 308 y Hy-Line Brown son la referencia para medir la eficiencia.
- **Estructura de Costos:** El alimento representa ~60% del costo. El sistema debe monitorear los precios de los granos y otros insumos.
- **Marco Regulatorio:** Requisitos de bioseguridad de SENASICA y NOMs aplicables.
- **Principios Contables NIF:** Especialmente la NIF C-11 para la valoración de activos biológicos y la NIF C-4 para inventarios.

# Diseño de Arquitectura y Especificaciones Técnicas del Sistema de Gestión Avícola

El diseño propuesto se alinea con la **Fase 2 de implementación** sugerida en el documento adjunto (migración a una base de datos centralizada con interfaz de usuario simple), utilizando tecnologías modernas y escalables adecuadas para la implementación rápida en plataformas como Bolt o Base44.

## 1. Arquitectura del Sistema (Modelo de Tres Capas)

Se propone una arquitectura de **tres capas** (Presentación, Lógica de Negocio y Datos) para garantizar la modularidad, escalabilidad y mantenibilidad del sistema.

| Capa | Componentes Clave | Descripción | Tecnología Sugerida |
| :--- | :--- | :--- | :--- |
| **1. Presentación (Frontend)** | Interfaces de Usuario (UI/UX), Dashboards | Responsable de la interacción con el usuario, la visualización de datos en tiempo real (KPIs) y la captura de datos diarios (mortalidad, alimento, peso, etc.). | HTML, CSS, JavaScript (Framework ligero como Vue.js o React para el dashboard). |
| **2. Lógica de Negocio (Backend)** | API RESTful, Módulos de Cálculo, Motor Contable | Contiene la lógica central: validación de datos, cálculo de KPIs (CA, IP/FEE), prorrateo de costos indirectos, y generación automática de pólizas contables. | **Python** (con **FastAPI** o **Flask**) para el API y la lógica de negocio. |
| **3. Datos (Database)** | Base de Datos Transaccional, Almacén de Parámetros | Almacena todos los datos operativos (registros diarios, lotes, inventarios) y los datos de referencia (estándares genéticos, catálogo de cuentas, precios de insumos). | **PostgreSQL** o **SQLite** (para prototipo/entornos pequeños). |

## 2. Especificaciones Técnicas y Módulos Clave

### A. Módulo de Gestión de Lotes (Datos Operativos)

Este módulo es el corazón del sistema y se centra en la captura de datos diarios.

| Entidad | Campos Clave | Lógica de Negocio Asociada |
| :--- | :--- | :--- |
| **Lotes** | `lote_id`, `tipo_produccion` (Engorde/Postura), `linea_genetica`, `fecha_inicio`, `num_aves_inicial`, `estado` (Activo/Finalizado) | Crea un nuevo registro de costo de producción (Activo Biológico en Proceso). |
| **Registro Diario** | `registro_id`, `lote_id`, `fecha`, `mortalidad_diaria`, `alimento_consumido_kg`, `agua_consumida_l`, `peso_promedio_g` (semanal), `huevos_producidos` (solo postura) | Valida la coherencia de los datos (ej. Consumo de alimento > 0). Activa el cálculo de KPIs. |
| **Inventario** | `insumo_id`, `nombre`, `unidad_medida`, `stock_actual`, `costo_unitario_promedio` | Actualiza stock con compras y reduce stock con el consumo diario registrado en los lotes. |

### B. Módulo de Costos y Contabilidad (Lógica Financiera)

Este módulo implementa el cumplimiento de las NIF y es crítico para la valoración.

| Funcionalidad | Descripción | Fórmula / Referencia NIF |
| :--- | :--- | :--- |
| **Cálculo de Costo de Transformación Diario** | Acumula los costos directos e indirectos al lote. | `Costo_Lote_Día = (Costo_Alimento + Costo_Vacunas + Costos_Indirectos_Prorrateados) / Num_Aves_Actuales` |
| **Prorrateo de Costos Indirectos** | Asigna costos indirectos (ej. sueldos, energía) a los lotes activos. | Base de asignación sugerida: **Número de aves de cada lote / Total de aves en la granja**. |
| **Valoración de Activo Biológico** | El valor del lote en el Balance General es el Costo de Transformación Acumulado. | **NIF C-11 (Activos Biológicos)**. |
| **Generación de Póliza Contable** | Convierte transacciones operativas en asientos contables. | **Debe/Haber** en el `LIBRO_DIARIO` según el Catálogo de Cuentas (NIF). Ejemplo: `DEBE: 1103-01 (Activo Biológico - Lote X) / HABER: 2101 (Proveedores) o 5101 (Costos de Venta)` |
| **Valoración a VRMCD (Sacrificio)** | Al finalizar el ciclo, el lote se valora a su **Valor Razonable Menos Costos de Disposición** para su reclasificación a Inventario de Producto Terminado. | `VRMCD = Precio_Mercado - Costos_Venta` |

### C. Módulo de Análisis de Desempeño (KPIs)

El sistema debe calcular y mostrar los siguientes indicadores en un dashboard:

| KPI | Propósito | Fórmula de Cálculo |
| :--- | :--- | :--- |
| **Conversión Alimenticia (CA)** | Mide la eficiencia del alimento. El KPI más crítico. | `Alimento Consumido (kg) / Ganancia de Peso Vivo (kg)` |
| **Índice de Productividad (IP) / FEE** | Mide la eficiencia global del lote. | `(Peso Vivo Promedio * (100 - % Mortalidad Acumulada)) / (Edad en días * CA Acumulada) * 100` |
| **Costo por Kilogramo Producido** | Mide la rentabilidad económica. | `Costo de Transformación Acumulado / Peso Vivo Total Producido` |
| **% Postura (Huevo)** | Mide la eficiencia de la parvada de postura. | `(Huevos Producidos / (Días de Postura * Aves Iniciales)) * 100` |

## 3. Estructura de la Base de Datos (Esquema Simplificado)

Se propone un esquema relacional simple para el prototipo (Fase 2).

```mermaid
erDiagram
    LOTES ||--o{ REGISTROS_DIARIOS : "contiene"
    LOTES ||--o{ COSTOS_LOTE : "acumula"
    INVENTARIO ||--o{ TRANSACCIONES_INVENTARIO : "afecta"
    REGISTROS_DIARIOS ||--o{ POLIZAS_CONTABLES : "genera"
    POLIZAS_CONTABLES ||--o{ LIBRO_DIARIO : "registra"
    PARAMETROS ||--o{ LOTES : "usa_estandar"

    LOTES {
        int lote_id PK
        varchar tipo_produccion
        varchar linea_genetica
        date fecha_inicio
        int num_aves_inicial
    }

    REGISTROS_DIARIOS {
        int registro_id PK
        int lote_id FK
        date fecha
        int mortalidad_diaria
        decimal alimento_consumido_kg
        decimal peso_promedio_g
        int huevos_producidos
    }

    COSTOS_LOTE {
        int costo_id PK
        int lote_id FK
        date fecha
        decimal costo_alimento
        decimal costos_indirectos_prorrateados
        decimal costo_transformacion_acumulado
    }

    PARAMETROS {
        varchar parametro_clave PK
        text valor
        text descripcion
    }

    LIBRO_DIARIO {
        int poliza_id PK
        date fecha
        varchar cuenta_contable FK "Catálogo NIF"
        decimal debe
        decimal haber
        varchar concepto
    }
```

## 4. Tecnologías Recomendadas para Bolt/Base44

Dado que el usuario menciona plataformas de desarrollo rápido (Bolt/Base44, que suelen soportar Python/JavaScript/SQL), se recomienda la siguiente pila:

| Componente | Tecnología Recomendada | Justificación |
| :--- | :--- | :--- |
| **Backend / Lógica** | **Python (FastAPI o Flask)** | Excelente para cálculos complejos (KPIs, prorrateo) y fácil integración con bases de datos. Ideal para construir una API REST. |
| **Base de Datos** | **PostgreSQL** | Base de datos relacional robusta, ideal para la integridad transaccional requerida por la contabilidad (NIF) y el seguimiento de lotes. |
| **Frontend / Dashboard** | **HTML/CSS/JavaScript** (con librerías de visualización como Chart.js o Plotly) | Permite la creación de interfaces dinámicas y dashboards con gráficas de comparación (Real vs. Teórico). |
| **Despliegue** | **Docker** (para contenedores) | Facilita el despliegue y la portabilidad en cualquier entorno (Bolt/Base44/Nube). |


# Base de Conocimiento para el Sistema de Gestión Avícola

Esta base de conocimiento concentra los datos, estándares y principios clave extraídos del documento "Sistema de Gestión Integral para la Producción Avícola en México: Estrategia, Operaciones y Cumplimiento Financiero NIF". Su propósito es servir como referencia constante para la lógica de negocio y la toma de decisiones en el sistema.

## 1. Indicadores Clave de Desempeño (KPIs)

El sistema debe priorizar el cálculo y la visualización de los siguientes indicadores:

| KPI | Descripción | Fórmula | Importancia |
| :--- | :--- | :--- | :--- |
| **Conversión Alimenticia (CA)** | Cantidad de alimento consumido por unidad de peso ganado. | $\text{CA} = \frac{\text{Alimento Consumido (kg)}}{\text{Ganancia de Peso Vivo (kg)}}$ | **CRÍTICA**. Factor principal de rentabilidad. |
| **Índice de Productividad (IP) / FEE** | Métrica compuesta de eficiencia global del lote. | $IP = \frac{\text{Peso Vivo Promedio (kg)} \times (100 - \% \text{Mortalidad Acumulada})}{\text{Edad en días} \times \text{CA Acumulada}} \times 100$ | **ALTA**. Permite comparar lotes de manera objetiva. |
| **Mortalidad Acumulada** | Porcentaje de aves perdidas. | $\text{Mortalidad} = \frac{\text{Aves Muertas}}{\text{Aves Iniciales}} \times 100$ | **ALTA**. El objetivo es mantenerla por debajo del 4-5% al final del ciclo de engorde. |
| **Porcentaje de Postura** | Producción de huevo para lotes de postura. | $\% \text{Postura} = \frac{\text{Huevos Producidos}}{\text{Días de Postura} \times \text{Aves Iniciales}} \times 100$ | **CRÍTICA** para lotes de postura. |

## 2. Estándares de Rendimiento Genético (Benchmarks)

Los cálculos de eficiencia deben compararse constantemente contra los estándares de las casas genéticas.

### A. Pollo de Engorde (Líneas Cobb 500 / Ross 308)

| Edad (Días) | Peso Vivo Promedio Objetivo (g) | CA Acumulada Objetivo |
| :--- | :--- | :--- |
| **7** | 180 - 202 | 0.891 - 0.900 |
| **14** | 570 - 588 | 1.029 - 1.050 |
| **21** | 1,116 - 1,320 | 1.182 - 1.250 |
| **28** | 1,783 - 2,359 | 1.322 - 1.400 |
| **35** | 2,521 - 3,635 | 1.441 - 1.550 |

### B. Gallinas de Postura (Línea Hy-Line Brown)

| Parámetro | Objetivo Clave |
| :--- | :--- |
| **Edad a 50% de Producción** | 140 días (20 semanas) |
| **Pico de Producción** | 94% - 96% |
| **Consumo de Alimento (Pico)** | 100 - 110 gramos/ave/día |

## 3. Principios de Costeo y Contabilidad (NIF México)

El sistema debe integrar un motor contable que cumpla con los siguientes principios:

### A. Estructura de Costos

| Rubro | Porcentaje Estimado del Costo Total | Nota Clave |
| :--- | :--- | :--- |
| **Alimento** | **~60%** | El costo más volátil y crítico. El sistema debe monitorear el precio de los granos (Maíz/Sorgo). |
| **Pollito de un día** | Variable | Costo directo asignado al lote. |
| **Vacunas y Sanidad** | Variable | Costo directo asignado al lote. |
| **Costos Indirectos** | Restante | Deben ser **prorrateados** a los lotes activos (ej. base: número de aves). |

### B. Valoración de Activos Biológicos (NIF C-11)

| Etapa | Concepto Contable | Principio de Valoración |
| :--- | :--- | :--- |
| **Lote Activo (Engorde/Postura)** | **Activo Biológico en Proceso** | **Costo de Transformación Acumulado** (Costos directos + Costos indirectos prorrateados). |
| **Lote al Sacrificio** | Reclasificación a **Inventario** | **Valor Razonable Menos Costos de Disposición (VRMCD)**. |
| **Inventario (Carne/Huevo)** | **Inventario de Producto Terminado** | Costo de Producción o VRMCD, el menor. |

### C. Catálogo de Cuentas (Esquema Simplificado)

El sistema debe usar un catálogo de cuentas estructurado para generar el `LIBRO_DIARIO` de manera automática.

| Código (Ejemplo) | Cuenta | Tipo | Propósito |
| :--- | :--- | :--- | :--- |
| **1103-01** | Activos Biológicos en Proceso | Activo Circulante | Valoración diaria de los lotes activos (Costo Acumulado). |
| **1103-02** | Activos Biológicos - Huevo/Carne | Activo Circulante | Inventario de producto terminado (a VRMCD). |
| **4101-01** | Venta de Pollo Vivo | Ingreso | Registro de las ventas. |
| **5101-01** | Costo de Venta de Pollo Vivo | Costo | Registro del costo del producto vendido (contra 1103-02). |

## 4. Requisitos de Bioseguridad (SENASICA)

El sistema debe incluir un módulo de cumplimiento que digitalice los requisitos de SENASICA, transformando la bioseguridad en un historial auditable.

| Requisito Clave | Función del Sistema |
| :--- | :--- |
| **Control de Acceso** | Bitácora digital de entrada/salida de personal y vehículos. |
| **Desinfección** | Registro de uso de arcos y vados sanitarios. |
| **Ubicación Sanitaria** | Registro de la UPA (Unidad de Producción Avícola) ante la autoridad. |
| **Sanidad Animal** | Registro de la aplicación de vacunas (NOM-013-ZOO-1994, NOM-044-ZOO-1995, etc.). |

